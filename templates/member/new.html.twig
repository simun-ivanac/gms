{% extends "base.html.twig" %}

{# Override some default blocks #}
{% form_theme memberForm _self %}

{# Title #}
{% block title %}Add Member{% endblock %}

{# Content #}
{% block content %}
	<h1 class="heading main-heading heading-new-member">Add member</h1>
	<div id="new-member" class="new-member">
		{# Global form errors #}
		{% if memberForm.vars.errors|length %}
			<ul class="form-errors">
				{% for error in memberForm.vars.errors %}
					<li class="form-error-message">{{ error.message }}</li>
				{% endfor %}
			</ul>
		{% endif %}

		{{ form_start(memberForm, {
			'attr': {'class': 'form form-new-member'}
		})}}

			{# Photo #}
			<div class="form-group image">
				{{ form_label(memberForm.photo, 'Photo', {
					'label_attr': {'class': 'form-label'}
				})}}
				<div class="image-input-container">
					<div class="image-preview">
						<img src="{{ asset('build/images/placeholder-user-profile.png') }}" alt="Image Preview" class="image-preview-img">
					</div>
					{{ form_widget(memberForm.photo, {
						'attr': {'class': 'form-input'}
					})}}
				</div>
				{{ form_help(memberForm.photo, {
					'help_attr': {'class': 'form-help'}
				})}}
				{% if memberForm.photo.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.photo.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# First Name #}
			<div class="form-group first-name">
				{{ form_label(memberForm.firstName, 'First Name *', {
					'label_attr': {'class': 'form-label'}
				})}}
				{{ form_widget(memberForm.firstName, {
					'attr': {'class': 'form-input'}
				})}}
				{% if memberForm.firstName.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.firstName.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# Last Name #}
			<div class="form-group last-name">
				{{ form_label(memberForm.lastName, 'Last Name *', {
					'label_attr': {'class': 'form-label'}
				})}}
				{{ form_widget(memberForm.lastName, {
					'attr': {'class': 'form-input'}
				})}}
				{% if memberForm.lastName.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.lastName.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# Date of Birth #}
			<div class="form-group date-of-birth">
				{{ form_label(memberForm.dateOfBirth, 'Date of Birth *', {
					'label_attr': {'class': 'form-label'}
				})}}
				{{ form_widget(memberForm.dateOfBirth, {
					'attr': {
						'class': 'form-input',
						'max': 'now'|date('Y-m-d'),
					}
				})}}
				{% if memberForm.dateOfBirth.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.dateOfBirth.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# Gender #}
			<div class="form-group gender">
				<div class="form-label">Gender *</div>
				<div class="form-group-radio-options">
					{%- block choice_widget_expanded -%}
						{%- for child in memberForm.gender %}
							<div class="radio-group">
								{{- form_widget(child, {
									'attr': {'class': 'form-radio'}
								})-}}
								{{- form_label(child, child.vars.label, {
									'label_attr': {'class': 'form-label'}
								})-}}
							</div>
						{% endfor -%}
					{%- endblock choice_widget_expanded -%}
				</div>
				{% if memberForm.gender.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.gender.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# Email #}
			<div class="form-group email">
				{{ form_label(memberForm.email, 'Email', {
					'label_attr': {'class': 'form-label'}
				})}}
				{{ form_widget(memberForm.email, {
					'attr': {
						'class': 'form-input',
						'autocomplete': 'on',
					}
				})}}
				{% if memberForm.email.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.email.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# Phone Number #}
			<div class="form-group phone-number">
				{{ form_label(memberForm.phoneNumber, 'Phone Number', {
					'label_attr': {'class': 'form-label'}
				})}}
				{{ form_widget(memberForm.phoneNumber, {
					'attr': {
						'class': 'form-input',
						'autocomplete': 'on',
						'pattern': "\\+?[1-9][0-9]{7,14}",
					}
				})}}
				{{ form_help(memberForm.phoneNumber, {
					'help_attr': {'class': 'form-help'}
				})}}
				{% if memberForm.phoneNumber.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.phoneNumber.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# PIN #}
			<div class="form-group pin">
				{{ form_label(memberForm.pin, 'PIN *', {
					'label_attr': {'class': 'form-label'}
				})}}
				{{ form_widget(memberForm.pin, {
					'attr': {
						'class': 'form-input',
						'min': '10000000000',
						'max': '99999999999',
						'maxlength': '11',
					}
				})}}
				{% if memberForm.pin.vars.errors|length %}
					<ul class="form-errors">
						{% for error in memberForm.pin.vars.errors %}
							<li class="form-error-message">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>

			{# Submit Button #}
			<div class="form-group submit">
				{{ form_widget(memberForm.save, {
					'label': 'Add',
					'attr': {'class': 'button submit-btn'}
				})}}
			</div>

		{{ form_end(memberForm) }}
	</div>
{% endblock %}

